# AI –∞—Å—Å–∏—Ç–µ–Ω—Ç –¥–ª—è FreeCAD
## –ß–∞—Å—Ç—å 1: –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (PNG, JPG, SVG)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–¥–¥–æ–Ω–∞ (–Ω–∞—á–∞–ª—å–Ω–∞—è)

```
AIAssistant/
‚îú‚îÄ‚îÄ Resources/
‚îÇ   ‚îî‚îÄ‚îÄ icons/
‚îÇ       ‚îú‚îÄ‚îÄ ai_assistant.svg
‚îÇ       ‚îî‚îÄ‚îÄ load_image.svg
‚îú‚îÄ‚îÄ InitGui.py
‚îú‚îÄ‚îÄ ai_assistant_workbench.py
‚îî‚îÄ‚îÄ data/                     ‚Üê –ø–∞–ø–∫–∞ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —Ç–µ–∫—Å—Ç–æ–≤)
```

> üí° –ü–∞–ø–∫–∞ `data/` –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è **–≤–Ω—É—Ç—Ä–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ FreeCAD**, —á—Ç–æ–±—ã –Ω–µ –∑–∞—Å–æ—Ä—è—Ç—å –∫–æ—Ä–µ–Ω—å.

---

## üìÑ 1. `InitGui.py`
```python
# InitGui.py
import FreeCADGui
from AIAssistant.ai_assistant_workbench import AIAssistantWorkbench

FreeCADGui.addWorkbench(AIAssistantWorkbench())
```

---

## üìÑ 2. `ai_assistant_workbench.py` (–ß–∞—Å—Ç—å 1: –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)

```python
# ai_assistant_workbench.py
import FreeCAD, FreeCADGui
import os
import shutil
from pathlib import Path
from PySide import QtGui, QtCore

# –ü–∞–ø–∫–∞ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö AIAssistant (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —Ç–µ–∫—Å—Ç–æ–≤ –∏ —Ç.–¥.)
AI_DATA_DIR = os.path.join(FreeCAD.getUserAppDataDir(), "AIAssistant", "data")
os.makedirs(AI_DATA_DIR, exist_ok=True)

class LoadImageCommand:
    def GetResources(self):
        icon_path = os.path.join(os.path.dirname(__file__), "Resources", "icons", "load_image.svg")
        return {
            "MenuText": "Load Image",
            "ToolTip": "Load an image (PNG, JPG, SVG) into AIAssistant workspace",
            "Pixmap": icon_path
        }

    def Activated(self):
        files, _ = QtGui.QFileDialog.getOpenFileNames(
            None,
            "Select Image Files",
            "",
            "Image Files (*.png *.jpg *.jpeg *.bmp *.svg *.gif)"
        )
        if not files:
            return

        for src in files:
            filename = os.path.basename(src)
            dst = os.path.join(AI_DATA_DIR, filename)
            
            # –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ
            if os.path.exists(dst):
                name, ext = os.path.splitext(filename)
                counter = 1
                while os.path.exists(os.path.join(AI_DATA_DIR, f"{name}_{counter}{ext}")):
                    counter += 1
                dst = os.path.join(AI_DATA_DIR, f"{name}_{counter}{ext}")
            
            try:
                shutil.copy2(src, dst)
                FreeCAD.Console.PrintMessage(f"[AIAssistant] Image saved: {dst}\n")
            except Exception as e:
                FreeCAD.Console.PrintError(f"[AIAssistant] Failed to copy {filename}: {str(e)}\n")
                QtGui.QMessageBox.critical(None, "Error", f"Failed to copy {filename}:\n{str(e)}")

    def IsActive(self):
        return True


class AIAssistantWorkbench(FreeCADGui.Workbench):
    MenuText = "AI Assistant"
    ToolTip = "AI-powered design assistant (Part 1: Image Loader)"

    def __init__(self):
        self.Icon = os.path.join(os.path.dirname(__file__), "Resources", "icons", "ai_assistant.svg")

    def Initialize(self):
        self.list = ["LoadImageCommand"]
        self.appendToolbar("AI Tools", self.list)
        self.appendMenu("AI Assistant", self.list)

    def GetClassName(self):
        return "Gui::PythonWorkbench"


FreeCADGui.addCommand("LoadImageCommand", LoadImageCommand())
```

---

## üñº 3. –ò–∫–æ–Ω–∫–∏

### `Resources/icons/load_image.svg`
```xml
<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
  <rect x="8" y="8" width="48" height="48" fill="none" stroke="black" stroke-width="4"/>
  <circle cx="32" cy="24" r="8" fill="none" stroke="black" stroke-width="4"/>
  <path d="M20 40 L44 40" stroke="black" stroke-width="4"/>
</svg>
```

### `Resources/icons/ai_assistant.svg`
‚Üí –ú–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `load_image.svg` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –∑–Ω–∞—á–æ–∫ "–º–æ–∑–≥–∞":

```xml
<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
  <circle cx="32" cy="32" r="28" fill="none" stroke="black" stroke-width="4"/>
  <path d="M22 28 Q32 20 42 28" stroke="black" stroke-width="4" fill="none"/>
  <path d="M22 36 Q32 44 42 36" stroke="black" stroke-width="4" fill="none"/>
</svg>
```

---

## üìÅ –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ?

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤:

```
%APPDATA%\FreeCAD\AIAssistant\data\your_image.png
```

–≠—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ **–≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é**:
- –í –±—É–¥—É—â–µ–º —Å—é–¥–∞ –∂–µ –º—ã –±—É–¥–µ–º —Å–æ—Ö—Ä–∞–Ω—è—Ç—å `.md`, `.txt`
- –ú–æ–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å `project.json` –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- –í—Å—ë –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–æ ‚Äî –Ω–µ –º–µ—à–∞–µ—Ç –¥—Ä—É–≥–∏–º –∞–¥–¥–æ–Ω–∞–º

---

## ‚ñ∂Ô∏è –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å?

1. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É `AIAssistant` –≤ `%APPDATA%\FreeCAD\Mod\`
2. –ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ç—É–¥–∞ –≤—Å–µ —Ñ–∞–π–ª—ã
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ FreeCAD
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–±–æ—á—É—é —Å—Ä–µ–¥—É **AI Assistant**
5. –ù–∞–∂–º–∏—Ç–µ **Load Image** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ PNG/SVG ‚Üí —Ñ–∞–π–ª —Å–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ `AIAssistant/data/`

---

## üîú –ß—Ç–æ –±—É–¥–µ—Ç –≤ –ß–∞—Å—Ç–∏ 2?

- –ö–Ω–æ–ø–∫–∞ **¬´Load Text¬ª**
- –î–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ `.txt` –∏–ª–∏ `.md` —Ñ–∞–π–ª–æ–≤
- –ò–ª–∏ –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ **Markdown-—Ä–µ–¥–∞–∫—Ç–æ—Ä**
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤ —Ç—É –∂–µ –ø–∞–ø–∫—É `data/`
