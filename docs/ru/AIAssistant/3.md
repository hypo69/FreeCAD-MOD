–û—Ç–ª–∏—á–Ω–æ! –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ **–ß–∞—Å—Ç–∏ 3** –∞–¥–¥–æ–Ω–∞ **AIAssistant**.

–¢–µ–ø–µ—Ä—å –º—ã —Å–æ–∑–¥–∞–¥–∏–º **–µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏**: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ–∂–µ—Ç **–ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, —É–¥–∞–ª—è—Ç—å** –∏ **—Å–≤—è–∑—ã–≤–∞—Ç—å** –∫–æ–Ω—Ç–µ–Ω—Ç.

---

## üìÅ –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–¥–¥–æ–Ω–∞

```
AIAssistant/
‚îú‚îÄ‚îÄ Resources/
‚îÇ   ‚îî‚îÄ‚îÄ icons/
‚îÇ       ‚îú‚îÄ‚îÄ ai_assistant.svg
‚îÇ       ‚îú‚îÄ‚îÄ load_image.svg
‚îÇ       ‚îú‚îÄ‚îÄ load_text.svg
‚îÇ       ‚îî‚îÄ‚îÄ manage_content.svg   ‚Üê –Ω–æ–≤–∞—è –∏–∫–æ–Ω–∫–∞
‚îú‚îÄ‚îÄ InitGui.py
‚îú‚îÄ‚îÄ ai_assistant_workbench.py    ‚Üê –æ–±–Ω–æ–≤–ª—ë–Ω
‚îî‚îÄ‚îÄ data/                        ‚Üê –≤—Å–µ —Ñ–∞–π–ª—ã –∑–¥–µ—Å—å
```

---

## üìÑ –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π `ai_assistant_workbench.py` (–ß–∞—Å—Ç—å 3)

–ú—ã –¥–æ–±–∞–≤–∏–º –Ω–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É **¬´Manage Content¬ª** –∏ –¥–∏–∞–ª–æ–≥ —Å –¥–≤—É–º—è –≤–∫–ª–∞–¥–∫–∞–º–∏: **Images** –∏ **Texts**.

```python
# ai_assistant_workbench.py
import FreeCAD, FreeCADGui
import os
import shutil
from pathlib import Path
from PySide import QtGui, QtCore

AI_DATA_DIR = os.path.join(FreeCAD.getUserAppDataDir(), "AIAssistant", "data")
os.makedirs(AI_DATA_DIR, exist_ok=True)

# === –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ===
def get_image_files():
    exts = {'.png', '.jpg', '.jpeg', '.bmp', '.svg', '.gif'}
    return sorted([f for f in os.listdir(AI_DATA_DIR) if Path(f).suffix.lower() in exts])

def get_text_files():
    exts = {'.txt', '.md'}
    return sorted([f for f in os.listdir(AI_DATA_DIR) if Path(f).suffix.lower() in exts])

def safe_remove(filepath):
    try:
        os.remove(filepath)
        return True
    except Exception as e:
        FreeCAD.Console.PrintError(f"[AIAssistant] Delete error: {str(e)}\n")
        return False

# === –ö–û–ú–ê–ù–î–ê: –ó–ê–ì–†–£–ó–ö–ê –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–Ø ===
class LoadImageCommand:
    def GetResources(self):
        icon_path = os.path.join(os.path.dirname(__file__), "Resources", "icons", "load_image.svg")
        return {"MenuText": "Load Image", "ToolTip": "Load image into AI workspace", "Pixmap": icon_path}
    def Activated(self):
        files, _ = QtGui.QFileDialog.getOpenFileNames(None, "Select Images", "", "Image Files (*.png *.jpg *.jpeg *.bmp *.svg *.gif)")
        if not files: return
        for src in files:
            self._copy_file_safe(src)
    def _copy_file_safe(self, src):
        filename = os.path.basename(src)
        dst = os.path.join(AI_DATA_DIR, filename)
        if os.path.exists(dst):
            name, ext = os.path.splitext(filename)
            counter = 1
            while os.path.exists(os.path.join(AI_DATA_DIR, f"{name}_{counter}{ext}")):
                counter += 1
            dst = os.path.join(AI_DATA_DIR, f"{name}_{counter}{ext}")
        try:
            shutil.copy2(src, dst)
            FreeCAD.Console.PrintMessage(f"[AIAssistant] Saved: {dst}\n")
        except Exception as e:
            QtGui.QMessageBox.critical(None, "Error", f"Failed to copy:\n{str(e)}")
    def IsActive(self): return True

# === –ö–û–ú–ê–ù–î–ê: –ó–ê–ì–†–£–ó–ö–ê –¢–ï–ö–°–¢–ê ===
class LoadTextCommand:
    def GetResources(self):
        icon_path = os.path.join(os.path.dirname(__file__), "Resources", "icons", "load_text.svg")
        return {"MenuText": "Load Text", "ToolTip": "Load or write text (Markdown)", "Pixmap": icon_path}
    def Activated(self):
        dialog = TextEditorDialog()
        dialog.exec_()
    def IsActive(self): return True

# === –ö–û–ú–ê–ù–î–ê: –£–ü–†–ê–í–õ–ï–ù–ò–ï –ö–û–ù–¢–ï–ù–¢–û–ú ===
class ManageContentCommand:
    def GetResources(self):
        icon_path = os.path.join(os.path.dirname(__file__), "Resources", "icons", "manage_content.svg")
        return {"MenuText": "Manage Content", "ToolTip": "View, edit and delete your AI inputs", "Pixmap": icon_path}
    def Activated(self):
        dialog = ContentManagerDialog()
        dialog.exec_()
    def IsActive(self): return True

# === –î–ò–ê–õ–û–ì: –†–ï–î–ê–ö–¢–û–† –¢–ï–ö–°–¢–ê ===
class TextEditorDialog(QtGui.QDialog):
    def __init__(self, filepath=None):
        super().__init__()
        self.filepath = filepath
        self.setWindowTitle("Edit Text" if filepath else "New Text")
        self.resize(600, 500)

        self.text_edit = QtGui.QTextEdit()
        self.text_edit.setAcceptRichText(False)
        self.text_edit.setFont(QtGui.QFont("Courier", 10))

        if filepath:
            try:
                with open(filepath, 'r', encoding='utf-8') as f:
                    self.text_edit.setPlainText(f.read())
            except Exception as e:
                QtGui.QMessageBox.critical(self, "Load Error", str(e))
                return

        self.save_btn = QtGui.QPushButton("Save")
        self.cancel_btn = QtGui.QPushButton("Cancel")
        self.save_btn.clicked.connect(self.save_text)
        self.cancel_btn.clicked.connect(self.reject)

        btn_layout = QtGui.QHBoxLayout()
        btn_layout.addStretch()
        btn_layout.addWidget(self.save_btn)
        btn_layout.addWidget(self.cancel_btn)

        layout = QtGui.QVBoxLayout()
        layout.addWidget(QtGui.QLabel("Enter your prompt or notes (Markdown supported):"))
        layout.addWidget(self.text_edit)
        layout.addLayout(btn_layout)
        self.setLayout(layout)

    def save_text(self):
        text = self.text_edit.toPlainText().strip()
        if not text:
            QtGui.QMessageBox.warning(self, "Warning", "Text is empty!")
            return

        if self.filepath:
            filepath = self.filepath
        else:
            base_name = "ai_prompt"
            ext = ".md"
            counter = 1
            while os.path.exists(os.path.join(AI_DATA_DIR, f"{base_name}_{counter}{ext}")):
                counter += 1
            filepath = os.path.join(AI_DATA_DIR, f"{base_name}_{counter}{ext}")

        try:
            with open(filepath, 'w', encoding='utf-8') as f:
                f.write(text)
            FreeCAD.Console.PrintMessage(f"[AIAssistant] Saved: {filepath}\n")
            QtGui.QMessageBox.information(self, "Saved", "Text saved successfully!")
            self.accept()
        except Exception as e:
            QtGui.QMessageBox.critical(self, "Save Error", str(e))

# === –î–ò–ê–õ–û–ì: –£–ü–†–ê–í–õ–ï–ù–ò–ï –ö–û–ù–¢–ï–ù–¢–û–ú ===
class ContentManagerDialog(QtGui.QDialog):
    def __init__(self):
        super().__init__()
        self.setWindowTitle("AI Assistant ‚Äî Content Manager")
        self.resize(700, 500)

        # –í–∫–ª–∞–¥–∫–∏
        self.tabs = QtGui.QTabWidget()
        self.image_tab = self.create_image_tab()
        self.text_tab = self.create_text_tab()
        self.tabs.addTab(self.image_tab, "Images")
        self.tabs.addTab(self.text_tab, "Texts")

        # –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
        close_btn = QtGui.QPushButton("Close")
        close_btn.clicked.connect(self.accept)

        layout = QtGui.QVBoxLayout()
        layout.addWidget(self.tabs)
        layout.addWidget(close_btn)
        self.setLayout(layout)

    def create_image_tab(self):
        widget = QtGui.QWidget()
        layout = QtGui.QVBoxLayout()

        self.image_list = QtGui.QListWidget()
        self.image_list.setSelectionMode(QtGui.QAbstractItemView.ExtendedSelection)
        self.refresh_image_list()

        btn_layout = QtGui.QHBoxLayout()
        delete_btn = QtGui.QPushButton("Delete Selected")
        delete_btn.clicked.connect(self.delete_selected_images)
        btn_layout.addWidget(delete_btn)
        btn_layout.addStretch()

        layout.addWidget(self.image_list)
        layout.addLayout(btn_layout)
        widget.setLayout(layout)
        return widget

    def create_text_tab(self):
        widget = QtGui.QWidget()
        layout = QtGui.QVBoxLayout()

        self.text_list = QtGui.QListWidget()
        self.text_list.setSelectionMode(QtGui.QAbstractItemView.SingleSelection)
        self.refresh_text_list()

        btn_layout = QtGui.QHBoxLayout()
        edit_btn = QtGui.QPushButton("Edit")
        delete_btn = QtGui.QPushButton("Delete")
        edit_btn.clicked.connect(self.edit_selected_text)
        delete_btn.clicked.connect(self.delete_selected_text)
        btn_layout.addWidget(edit_btn)
        btn_layout.addWidget(delete_btn)
        btn_layout.addStretch()

        layout.addWidget(self.text_list)
        layout.addLayout(btn_layout)
        widget.setLayout(layout)
        return widget

    def refresh_image_list(self):
        self.image_list.clear()
        for f in get_image_files():
            self.image_list.addItem(f)

    def refresh_text_list(self):
        self.text_list.clear()
        for f in get_text_files():
            self.text_list.addItem(f)

    def delete_selected_images(self):
        items = self.image_list.selectedItems()
        if not items:
            return
        if QtGui.QMessageBox.question(self, "Confirm", f"Delete {len(items)} image(s)?", 
                                      QtGui.QMessageBox.Yes | QtGui.QMessageBox.No) != QtGui.QMessageBox.Yes:
            return
        for item in items:
            filename = item.text()
            filepath = os.path.join(AI_DATA_DIR, filename)
            if safe_remove(filepath):
                FreeCAD.Console.PrintMessage(f"[AIAssistant] Deleted: {filename}\n")
        self.refresh_image_list()

    def edit_selected_text(self):
        items = self.text_list.selectedItems()
        if not items:
            return
        filename = items[0].text()
        filepath = os.path.join(AI_DATA_DIR, filename)
        dialog = TextEditorDialog(filepath)
        dialog.exec_()
        self.refresh_text_list()

    def delete_selected_text(self):
        items = self.text_list.selectedItems()
        if not items:
            return
        filename = items[0].text()
        if QtGui.QMessageBox.question(self, "Confirm", f"Delete '{filename}'?", 
                                      QtGui.QMessageBox.Yes | QtGui.QMessageBox.No) != QtGui.QMessageBox.Yes:
            return
        filepath = os.path.join(AI_DATA_DIR, filename)
        if safe_remove(filepath):
            FreeCAD.Console.PrintMessage(f"[AIAssistant] Deleted: {filename}\n")
            self.refresh_text_list()

# === –†–ê–ë–û–ß–ê–Ø –°–†–ï–î–ê ===
class AIAssistantWorkbench(FreeCADGui.Workbench):
    MenuText = "AI Assistant"
    ToolTip = "AI design assistant: images + text + management"

    def __init__(self):
        self.Icon = os.path.join(os.path.dirname(__file__), "Resources", "icons", "ai_assistant.svg")

    def Initialize(self):
        self.list = ["LoadImageCommand", "LoadTextCommand", "ManageContentCommand"]
        self.appendToolbar("AI Tools", self.list)
        self.appendMenu("AI Assistant", self.list)

    def GetClassName(self):
        return "Gui::PythonWorkbench"

# === –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø ===
FreeCADGui.addCommand("LoadImageCommand", LoadImageCommand())
FreeCADGui.addCommand("LoadTextCommand", LoadTextCommand())
FreeCADGui.addCommand("ManageContentCommand", ManageContentCommand())
```

---

## üñº –ù–æ–≤–∞—è –∏–∫–æ–Ω–∫–∞: `manage_content.svg`

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `Resources/icons/manage_content.svg`:

```xml
<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
  <rect x="8" y="8" width="20" height="20" fill="none" stroke="black" stroke-width="4"/>
  <rect x="36" y="8" width="20" height="20" fill="none" stroke="black" stroke-width="4"/>
  <rect x="8" y="36" width="48" height="20" fill="none" stroke="black" stroke-width="4"/>
</svg>
```

---

## üí° –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –í–∫–ª–∞–¥–∫–∞ **Images**:
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –£–¥–∞–ª–µ–Ω–∏–µ (–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ)

### –í–∫–ª–∞–¥–∫–∞ **Texts**:
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö `.md` –∏ `.txt` —Ñ–∞–π–ª–æ–≤
- **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
- –£–¥–∞–ª–µ–Ω–∏–µ

> üî∏ –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã: –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å FreeCAD.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–æ–π –∂–µ:

```
%APPDATA%\FreeCAD\AIAssistant\data\
‚îú‚îÄ‚îÄ diagram.svg
‚îú‚îÄ‚îÄ photo.jpg
‚îú‚îÄ‚îÄ ai_prompt_1.md
‚îî‚îÄ‚îÄ notes.txt
```

---

## ‚ñ∂Ô∏è –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ —Ç–µ–∫—Å—Ç (–∫–∞–∫ –≤ –ß–∞—Å—Ç–∏ 1 –∏ 2)
2. –ù–∞–∂–º–∏—Ç–µ **Manage Content**
3. –ü–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ—Å—å –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏
4. –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ç–µ–∫—Å—Ç—ã, —É–¥–∞–ª—è–π—Ç–µ –Ω–µ–Ω—É–∂–Ω–æ–µ

---

## üîú –ß—Ç–æ –±—É–¥–µ—Ç –≤ –ß–∞—Å—Ç–∏ 4?

- **–°–≤—è–∑—ã–≤–∞–Ω–∏–µ**: –ø—Ä–∏–≤—è–∑–∫–∞ —Ç–µ–∫—Å—Ç–∞ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–ø–∏—Å–∞–Ω–∏–µ –∫ —Å—Ö–µ–º–µ)
- **–≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞** –≤ ZIP
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ò–ò**: –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞ + –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ LLM (–ª–æ–∫–∞–ª—å–Ω—ã–π –∏–ª–∏ –æ–±–ª–∞—á–Ω—ã–π)

---

–ì–æ—Ç–æ–≤—ã –∫ –ß–∞—Å—Ç–∏ 4? –ù–∞–ø–∏—à–∏—Ç–µ **¬´–î–∞¬ª** ‚Äî –∏ –º—ã –¥–æ–±–∞–≤–∏–º **—É–º–Ω—É—é —Å–≤—è–∑–∫—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞** –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º –∞–¥–¥–æ–Ω –∫ —Ä–∞–±–æ—Ç–µ —Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º!