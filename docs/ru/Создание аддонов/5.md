# üìò –£—á–µ–±–Ω—ã–π –∫—É—Ä—Å: –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–¥–æ–Ω–æ–≤ –¥–ª—è FreeCAD  
## –£—Ä–æ–∫ 5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

> **–¶–µ–ª—å —É—Ä–æ–∫–∞**: —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –∞–¥–¥–æ–Ω ¬´Box Builder¬ª –∑–∞–ø–æ–º–∏–Ω–∞–ª –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≤–≤–µ–¥—ë–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª –∏—Ö –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ.

---

## üíæ –ß–∞—Å—Ç—å 1. –ö–∞–∫ FreeCAD —Ö—Ä–∞–Ω–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏?

FreeCAD –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ‚Äî —á–µ—Ä–µ–∑ **Parameter Manager**.

–û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —Å **–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π –±–∞–∑–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**, –ø–æ—Ö–æ–∂–µ–π –Ω–∞ Windows Registry.

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

```python
# –ü–æ–ª—É—á–∏—Ç—å –≥—Ä—É–ø–ø—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
params = FreeCAD.ParamGet("User parameter:BaseApp/Preferences/MyAddon")

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
params.SetFloat("LastLength", 30.0)
params.SetString("LastName", "MyBox")

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ (—Å –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
length = params.GetFloat("LastLength", 10.0)  # 10.0 ‚Äî –µ—Å–ª–∏ –Ω–µ—Ç —Ç–∞–∫–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
name = params.GetString("LastName", "DefaultBox")
```

> üí° –ü—É—Ç—å `"User parameter:BaseApp/Preferences/..."` ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫.

---

## üõ† –ß–∞—Å—Ç—å 2. –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∞–¥–¥–æ–Ω: ¬´Box Builder —Å –ø–∞–º—è—Ç—å—é¬ª

–ú—ã –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∞–¥–¥–æ–Ω, –¥–æ–±–∞–≤–∏–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫—É –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π.

### –§–∞–π–ª `box_builder_workbench.py` (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)

```python
# box_builder_workbench.py
import FreeCAD, FreeCADGui
from PySide import QtGui, QtCore

# === –ü–£–¢–¨ –ö –ù–ê–°–¢–†–û–ô–ö–ê–ú ===
PARAM_PATH = "User parameter:BaseApp/Preferences/BoxBuilderAddon"

def get_saved_settings():
    """–ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é"""
    params = FreeCAD.ParamGet(PARAM_PATH)
    return {
        "length": params.GetFloat("LastLength", 30.0),
        "width": params.GetFloat("LastWidth", 20.0),
        "height": params.GetFloat("LastHeight", 10.0),
        "name": params.GetString("LastName", "CustomBox")
    }

def save_settings(length, width, height, name):
    """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"""
    params = FreeCAD.ParamGet(PARAM_PATH)
    params.SetFloat("LastLength", length)
    params.SetFloat("LastWidth", width)
    params.SetFloat("LastHeight", height)
    params.SetString("LastName", name)


# === –§–£–ù–ö–¶–ò–Ø –°–û–ó–î–ê–ù–ò–Ø –ö–û–†–û–ë–ö–ò ===
def create_box(length, width, height, name="CustomBox"):
    doc = FreeCAD.ActiveDocument
    if not doc:
        doc = FreeCAD.newDocument("BoxBuilder")
    
    # –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è
    base_name = name
    index = 1
    obj_name = base_name
    while obj_name in [obj.Name for obj in doc.Objects]:
        obj_name = f"{base_name}_{index}"
        index += 1

    box = doc.addObject("Part::Box", obj_name)
    box.Length = length
    box.Width = width
    box.Height = height
    doc.recompute()
    return box


# === –î–ò–ê–õ–û–ì–û–í–û–ï –û–ö–ù–û ===
class BoxBuilderDialog(QtGui.QDialog):
    def __init__(self):
        super(BoxBuilderDialog, self).__init__()
        self.setWindowTitle("Box Builder")
        self.setWindowFlags(QtCore.Qt.WindowStaysOnTopHint)
        self.resize(300, 180)

        # –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        settings = get_saved_settings()

        # –ü–æ–ª—è –≤–≤–æ–¥–∞
        self.length_input = QtGui.QLineEdit(str(settings["length"]))
        self.width_input = QtGui.QLineEdit(str(settings["width"]))
        self.height_input = QtGui.QLineEdit(str(settings["height"]))
        self.name_input = QtGui.QLineEdit(settings["name"])

        # –ö–Ω–æ–ø–∫–∏
        self.create_button = QtGui.QPushButton("Create Box")
        self.cancel_button = QtGui.QPushButton("Cancel")

        # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
        self.create_button.clicked.connect(self.on_create)
        self.cancel_button.clicked.connect(self.reject)

        # –†–∞—Å–∫–ª–∞–¥–∫–∞
        layout = QtGui.QFormLayout()
        layout.addRow("Name:", self.name_input)
        layout.addRow("Length (mm):", self.length_input)
        layout.addRow("Width (mm):", self.width_input)
        layout.addRow("Height (mm):", self.height_input)

        button_layout = QtGui.QHBoxLayout()
        button_layout.addWidget(self.create_button)
        button_layout.addWidget(self.cancel_button)

        main_layout = QtGui.QVBoxLayout()
        main_layout.addLayout(layout)
        main_layout.addLayout(button_layout)
        self.setLayout(main_layout)

    def on_create(self):
        try:
            name = self.name_input.text().strip()
            if not name:
                name = "CustomBox"
                
            length = float(self.length_input.text())
            width = float(self.width_input.text())
            height = float(self.height_input.text())
            
            if length <= 0 or width <= 0 or height <= 0:
                raise ValueError("All dimensions must be positive")
            
            # –°–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç
            create_box(length, width, height, name)
            
            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            save_settings(length, width, height, name)
            
            self.accept()
            
        except ValueError as e:
            QtGui.QMessageBox.warning(self, "Input Error", f"Invalid input:\n{str(e)}")


# === –ö–û–ú–ê–ù–î–ê –ò –†–ê–ë–û–ß–ê–Ø –°–†–ï–î–ê (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ===
class BoxBuilderCommand:
    def GetResources(self):
        return {"MenuText": "Box Builder", "ToolTip": "Create a box with custom dimensions"}
    def Activated(self):
        dialog = BoxBuilderDialog()
        dialog.exec_()
    def IsActive(self):
        return True

class BoxBuilderWorkbench(FreeCADGui.Workbench):
    MenuText = "Box Builder"
    ToolTip = "Create custom boxes with GUI"
    def Initialize(self):
        self.list = ["BoxBuilderCommand"]
        self.appendToolbar("Box Tools", self.list)
        self.appendMenu("Box Builder", self.list)
    def GetClassName(self):
        return "Gui::PythonWorkbench"

FreeCADGui.addCommand("BoxBuilderCommand", BoxBuilderCommand())
```

---

## üîç –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

1. **–î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏**:
   - `get_saved_settings()` ‚Äî –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
   - `save_settings()` ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—É—â–∏–µ

2. **–ü—É—Ç—å –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º**:
   ```python
   PARAM_PATH = "User parameter:BaseApp/Preferences/BoxBuilderAddon"
   ```
   ‚Üí –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≥—Ä—É–ø–ø–µ, –Ω–µ –º–µ—à–∞—è –¥—Ä—É–≥–∏–º –∞–¥–¥–æ–Ω–∞–º.

3. **–ü–æ–ª–µ –¥–ª—è –∏–º–µ–Ω–∏** –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

4. **–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –æ–∫–Ω–∞** ‚Äî –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è **—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏**.

5. **–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è** ‚Äî —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è **—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**.

---

## ‚ñ∂Ô∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ FreeCAD
2. –û—Ç–∫—Ä–æ–π—Ç–µ **Box Builder**
3. –í–≤–µ–¥–∏—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä:
   - Name: `MyTestBox`
   - Length: `50`
   - Width: `30`
   - Height: `20`
4. –ù–∞–∂–º–∏—Ç–µ **Create Box**
5. **–ó–∞–∫—Ä–æ–π—Ç–µ FreeCAD**
6. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞**
7. –û—Ç–∫—Ä–æ–π—Ç–µ **Box Builder**

‚úÖ –ü–æ–ª—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω—ã —Ç–µ–º–∏ –∂–µ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏!

---

## üìÇ –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —ç—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏?

- **Windows**: –≤ —Ä–µ–µ—Å—Ç—Ä–µ (`HKEY_CURRENT_USER\SOFTWARE\FreeCAD\...`)
- **Linux/macOS**: –≤ —Ñ–∞–π–ª–µ `user.cfg` –≤–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ FreeCAD

–ù–æ –≤–∞–º **–Ω–µ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å —ç—Ç–æ** ‚Äî FreeCAD —Å–∞–º —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º.

---

## üß™ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ

1. –î–æ–±–∞–≤—å—Ç–µ **–≥–∞–ª–æ—á–∫—É** ¬´Center on origin¬ª –∏ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –µ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏.
2. –°–¥–µ–ª–∞–π—Ç–µ —Ç–∞–∫, —á—Ç–æ–±—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∞–¥–¥–æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å **—Ä–∞–∑—É–º–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ).
3. –î–æ–±–∞–≤—å—Ç–µ –∫–Ω–æ–ø–∫—É **¬´Reset to defaults¬ª**, –∫–æ—Ç–æ—Ä–∞—è —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø–æ–ª—è –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ –æ—á–∏—â–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

–ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è —Å–±—Ä–æ—Å–∞:
```python
def reset_settings():
    params = FreeCAD.ParamGet(PARAM_PATH)
    params.RemGroup("BoxBuilderAddon")  # –£–¥–∞–ª—è–µ—Ç –≤—Å—é –≥—Ä—É–ø–ø—É
```

---

## üí° –°–æ–≤–µ—Ç—ã

- –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ **–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** –≤ `GetFloat()`, `GetString()` –∏ —Ç.–¥.
- –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ ‚Äî —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –Ω—É–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å** (`BoxBuilderAddon`), —á—Ç–æ–±—ã –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ –∞–¥–¥–æ–Ω–∞–º–∏

---

## ‚ñ∂Ô∏è –ß—Ç–æ –¥–∞–ª—å—à–µ?

–í **–£—Ä–æ–∫–µ 6** –º—ã:
- –î–æ–±–∞–≤–∏–º **–∏–∫–æ–Ω–∫–∏** –∫ –∫–Ω–æ–ø–∫–∞–º –∏ —Ä–∞–±–æ—á–µ–π —Å—Ä–µ–¥–µ
- –ù–∞—É—á–∏–º—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **SVG –∏ PNG** –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- –°–¥–µ–ª–∞–µ–º –∞–¥–¥–æ–Ω –≤–∏–∑—É–∞–ª—å–Ω–æ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–º