# üìò –£—á–µ–±–Ω—ã–π –∫—É—Ä—Å: –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–¥–æ–Ω–æ–≤ –¥–ª—è FreeCAD  
## –£—Ä–æ–∫ 4. –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (GUI): –¥–∏–∞–ª–æ–≥–æ–≤–æ–µ –æ–∫–Ω–æ —Å –ø–æ–ª—è–º–∏ –≤–≤–æ–¥–∞

> **–¶–µ–ª—å —É—Ä–æ–∫–∞**: —Å–æ–∑–¥–∞—Ç—å –æ–∫–Ω–æ —Å –ø–æ–ª—è–º–∏ –¥–ª—è –≤–≤–æ–¥–∞ –¥–ª–∏–Ω—ã, —à–∏—Ä–∏–Ω—ã –∏ –≤—ã—Å–æ—Ç—ã, –∏ –ø–æ –Ω–∞–∂–∞—Ç–∏—é –∫–Ω–æ–ø–∫–∏ —Å—Ç—Ä–æ–∏—Ç—å –∫–æ—Ä–æ–±–∫—É —Å —ç—Ç–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.

---

## üñº –ß–∞—Å—Ç—å 1. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç GUI –≤ FreeCAD?

FreeCAD –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **PySide** ‚Äî Python-–æ–±—ë—Ä—Ç–∫—É –Ω–∞–¥ –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π **Qt** (—Ç–∞ –∂–µ, —á—Ç–æ –≤ Blender, Maya, –∏ –º–Ω–æ–≥–∏—Ö –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö).

–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `QtGui.QDialog` ‚Äî –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
- `QtGui.QLineEdit` ‚Äî –ø–æ–ª–µ –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞
- `QtGui.QPushButton` ‚Äî –∫–Ω–æ–ø–∫–∞
- `QtGui.QFormLayout` ‚Äî —É–¥–æ–±–Ω–∞—è —Ä–∞—Å–∫–ª–∞–¥–∫–∞ ¬´–º–µ—Ç–∫–∞ + –ø–æ–ª–µ¬ª

> üí° –í—Å–µ GUI-—ç–ª–µ–º–µ–Ω—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è **–≤–Ω—É—Ç—Ä–∏ Python-—Å–∫—Ä–∏–ø—Ç–∞**, –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤ (—Ö–æ—Ç—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.ui` –∏–∑ Qt Designer ‚Äî –Ω–æ –º—ã –Ω–∞—á–Ω—ë–º —Å –ø—Ä–æ—Å—Ç–æ–≥–æ).

---

## üõ† –ß–∞—Å—Ç—å 2. –ê–¥–¥–æ–Ω: ¬´Box Builder —Å GUI¬ª

–ú—ã —Ä–∞—Å—à–∏—Ä–∏–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∞–¥–¥–æ–Ω, –¥–æ–±–∞–≤–∏–≤ –¥–∏–∞–ª–æ–≥–æ–≤–æ–µ –æ–∫–Ω–æ.

### –®–∞–≥ 1. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É

```
.../Mod/BoxBuilderAddon/
```

### –®–∞–≥ 2. –§–∞–π–ª `InitGui.py`

```python
# InitGui.py
import FreeCADGui
from BoxBuilderAddon.box_builder_workbench import BoxBuilderWorkbench

FreeCADGui.addWorkbench(BoxBuilderWorkbench())
```

### –®–∞–≥ 3. –§–∞–π–ª `box_builder_workbench.py`

```python
# box_builder_workbench.py
import FreeCAD, FreeCADGui
from PySide import QtGui, QtCore

# === –§–£–ù–ö–¶–ò–Ø –°–û–ó–î–ê–ù–ò–Ø –ö–û–†–û–ë–ö–ò ===
def create_box(length, width, height, name="CustomBox"):
    doc = FreeCAD.ActiveDocument
    if not doc:
        doc = FreeCAD.newDocument("BoxBuilder")
    
    # –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è
    base_name = name
    index = 1
    obj_name = base_name
    while obj_name in [obj.Name for obj in doc.Objects]:
        obj_name = f"{base_name}_{index}"
        index += 1

    box = doc.addObject("Part::Box", obj_name)
    box.Length = length
    box.Width = width
    box.Height = height
    doc.recompute()
    return box


# === –î–ò–ê–õ–û–ì–û–í–û–ï –û–ö–ù–û ===
class BoxBuilderDialog(QtGui.QDialog):
    def __init__(self):
        super(BoxBuilderDialog, self).__init__()
        self.setWindowTitle("Box Builder")
        self.setWindowFlags(QtCore.Qt.WindowStaysOnTopHint)
        self.resize(300, 150)

        # –ü–æ–ª—è –≤–≤–æ–¥–∞
        self.length_input = QtGui.QLineEdit("30.0")
        self.width_input = QtGui.QLineEdit("20.0")
        self.height_input = QtGui.QLineEdit("10.0")

        # –ö–Ω–æ–ø–∫–∏
        self.create_button = QtGui.QPushButton("Create Box")
        self.cancel_button = QtGui.QPushButton("Cancel")

        # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
        self.create_button.clicked.connect(self.on_create)
        self.cancel_button.clicked.connect(self.reject)

        # –†–∞—Å–∫–ª–∞–¥–∫–∞
        layout = QtGui.QFormLayout()
        layout.addRow("Length (mm):", self.length_input)
        layout.addRow("Width (mm):", self.width_input)
        layout.addRow("Height (mm):", self.height_input)

        button_layout = QtGui.QHBoxLayout()
        button_layout.addWidget(self.create_button)
        button_layout.addWidget(self.cancel_button)

        main_layout = QtGui.QVBoxLayout()
        main_layout.addLayout(layout)
        main_layout.addLayout(button_layout)
        self.setLayout(main_layout)

    def on_create(self):
        try:
            length = float(self.length_input.text())
            width = float(self.width_input.text())
            height = float(self.height_input.text())
            
            if length <= 0 or width <= 0 or height <= 0:
                raise ValueError("All dimensions must be positive")
            
            create_box(length, width, height)
            self.accept()  # –ó–∞–∫—Ä—ã–≤–∞–µ–º –æ–∫–Ω–æ
            
        except ValueError as e:
            QtGui.QMessageBox.warning(self, "Input Error", f"Invalid input:\n{str(e)}")


# === –ö–û–ú–ê–ù–î–ê ===
class BoxBuilderCommand:
    def GetResources(self):
        return {
            "MenuText": "Box Builder",
            "ToolTip": "Create a box with custom dimensions"
        }

    def Activated(self):
        dialog = BoxBuilderDialog()
        dialog.exec_()  # –ú–æ–¥–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤

    def IsActive(self):
        return True


# === –†–ê–ë–û–ß–ê–Ø –°–†–ï–î–ê ===
class BoxBuilderWorkbench(FreeCADGui.Workbench):
    MenuText = "Box Builder"
    ToolTip = "Create custom boxes with GUI"

    def Initialize(self):
        self.list = ["BoxBuilderCommand"]
        self.appendToolbar("Box Tools", self.list)
        self.appendMenu("Box Builder", self.list)

    def GetClassName(self):
        return "Gui::PythonWorkbench"


FreeCADGui.addCommand("BoxBuilderCommand", BoxBuilderCommand())
```

---

## üîç –†–∞–∑–±–æ—Ä –∫–ª—é—á–µ–≤—ã—Ö —á–∞—Å—Ç–µ–π

### 1. **–î–∏–∞–ª–æ–≥–æ–≤–æ–µ –æ–∫–Ω–æ (`BoxBuilderDialog`)**
- –ù–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç `QtGui.QDialog`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `QFormLayout` –¥–ª—è –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–≥–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –ø–æ–ª–µ–π
- –ö–Ω–æ–ø–∫–∞ **Create Box** –≤—ã–∑—ã–≤–∞–µ—Ç `on_create()`, **Cancel** ‚Äî –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –æ–∫–Ω–æ

### 2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞**
- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Ç–µ–∫—Å—Ç –≤ `float`
- –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è **–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ**
- –ü—Ä–∏ –æ—à–∏–±–∫–µ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `QMessageBox.warning`

### 3. **–°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞**
- –§—É–Ω–∫—Ü–∏—è `create_box()` –≤—ã–Ω–µ—Å–µ–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ ‚Äî —Ç–∞–∫ –∫–æ–¥ —á–∏—â–µ
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

### 4. **–ó–∞–ø—É—Å–∫ –æ–∫–Ω–∞**
- `dialog.exec_()` ‚Äî –¥–µ–ª–∞–µ—Ç –æ–∫–Ω–æ **–º–æ–¥–∞–ª—å–Ω—ã–º** (–Ω–µ–ª—å–∑—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å FreeCAD, –ø–æ–∫–∞ –æ–Ω–æ –æ—Ç–∫—Ä—ã—Ç–æ)

---

## ‚ñ∂Ô∏è –®–∞–≥ 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª—ã
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ FreeCAD
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–±–æ—á—É—é —Å—Ä–µ–¥—É **¬´Box Builder¬ª**
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **¬´Box Builder¬ª**
5. –í –ø–æ—è–≤–∏–≤—à–µ–º—Å—è –æ–∫–Ω–µ –≤–≤–µ–¥–∏—Ç–µ —Ä–∞–∑–º–µ—Ä—ã ‚Üí –Ω–∞–∂–º–∏—Ç–µ **Create Box**

‚úÖ –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–æ—Ä–æ–±–∫–∞ —Å –≤–∞—à–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏!

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ:
- –í–≤–µ—Å—Ç–∏ –±—É–∫–≤—ã ‚Üí –ø–æ—è–≤–∏—Ç—Å—è –æ—à–∏–±–∫–∞
- –í–≤–µ—Å—Ç–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ ‚Üí –æ—à–∏–±–∫–∞
- –í–≤–µ—Å—Ç–∏ –¥—Ä–æ–±–Ω—ã–µ —á–∏—Å–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `12.5`) ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç!

---

## üß™ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ

1. –î–æ–±–∞–≤—å—Ç–µ **—á–µ—Ç–≤—ë—Ä—Ç–æ–µ –ø–æ–ª–µ**: ¬´Name¬ª ‚Äî —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –∑–∞–¥–∞—Ç—å –∏–º—è –æ–±—ä–µ–∫—Ç–∞.
2. –°–¥–µ–ª–∞–π—Ç–µ —Ç–∞–∫, —á—Ç–æ–±—ã –ø—Ä–∏ –ø—É—Å—Ç–æ–º –∏–º–µ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (`"CustomBox"`).
3. –î–æ–±–∞–≤—å—Ç–µ **–≥–∞–ª–æ—á–∫—É** ¬´Center on origin¬ª ‚Äî –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞, –∫–æ—Ä–æ–±–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ –Ω–∞—á–∞–ª–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç.

> üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è:  
> –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ—Ä–æ–±–∫–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –µ—ë —Å–≤–æ–π—Å—Ç–≤–æ `Placement`:  
> ```python
> from FreeCAD import Vector
> box.Placement.Base = Vector(-length/2, -width/2, -height/2)
> ```

---

## üí° –°–æ–≤–µ—Ç—ã –ø–æ —Ä–∞–±–æ—Ç–µ —Å GUI

- –í—Å–µ–≥–¥–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ –≤–≤–æ–¥ –≤ `try/except` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–≤–µ—Å—Ç–∏ —á—Ç–æ —É–≥–æ–¥–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `QDoubleValidator`, —á—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Qt Designer** –∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å `.ui`-—Ñ–∞–π–ª—ã, –Ω–æ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á ‚Äî –∫–æ–¥ –ø—Ä–æ—â–µ

---

## ‚ñ∂Ô∏è –ß—Ç–æ –¥–∞–ª—å—à–µ?

–í **–£—Ä–æ–∫–µ 5** –º—ã:
- –ù–∞—É—á–∏–º—Å—è **—Å–æ—Ö—Ä–∞–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏ FreeCAD
- –°–¥–µ–ª–∞–µ–º —Ç–∞–∫, —á—Ç–æ–±—ã –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤–≤–µ–¥—ë–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ **–∑–∞–ø–æ–º–∏–Ω–∞–ª–æ—Å—å**
- –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º FreeCAD: `FreeCAD.ParamGet()`

–≠—Ç–æ —Å–¥–µ–ª–∞–µ—Ç –≤–∞—à –∞–¥–¥–æ–Ω –µ—â—ë —É–¥–æ–±–Ω–µ–µ!
