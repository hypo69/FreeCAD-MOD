# üìò Cours : Cr√©ation d'add-ons pour FreeCAD  
## Le√ßon 2. Votre premier add-on : ¬´ Hello World ¬ª

> **Objectif de la le√ßon** : cr√©er un add-on simple qui ajoute un nouvel environnement de travail avec un bouton, et qui affiche un message lorsqu'on clique dessus.

---

## üìÅ √âtape 1. Pr√©paration du dossier de l'add-on

Assurez-vous d'avoir le dossier :

```
.../FreeCAD/Mod/HelloWorldAddon/
```

Si ce n'est pas le cas, cr√©ez-le.

> üí° Le nom du dossier est **important** : il doit correspondre au nom du module dans le code.
> Nous utiliserons `HelloWorldAddon`.

√Ä l'int√©rieur de ce dossier, cr√©ez **deux fichiers** :
- `InitGui.py`
- `hello_workbench.py`

> ‚ùó N'utilisez pas d'espaces ni de caract√®res cyrilliques dans les noms de fichiers et de dossiers !

---

## üìÑ √âtape 2. Fichier `InitGui.py` ‚Äî point d'entr√©e

Ce fichier est **automatiquement lanc√©** par FreeCAD au d√©marrage s'il se trouve dans le dossier de l'add-on.

Ouvrez-le dans un √©diteur et ins√©rez le code suivant :

```python
# InitGui.py
import FreeCADGui
from HelloWorldAddon.hello_workbench import HelloWorldWorkbench

FreeCADGui.addWorkbench(HelloWorldWorkbench())
```

### üîç Que fait ce code ?

1. **Importe** notre environnement de travail depuis le fichier `hello_workbench.py`
2. **Enregistre** cet environnement dans l'interface FreeCAD via `FreeCADGui.addWorkbench()`

> ‚ö†Ô∏è Remarque :
> `from HelloWorldAddon.hello_workbench` ‚Äî ici `HelloWorldAddon` est le **nom du dossier**, et `hello_workbench` est le nom du fichier **sans l'extension `.py`**.

---

## üìÑ √âtape 3. Fichier `hello_workbench.py` ‚Äî logique de l'add-on

Maintenant, cr√©ons l'environnement de travail lui-m√™me.

Ins√©rez le code suivant dans `hello_workbench.py` :

```python
# hello_workbench.py
import FreeCAD, FreeCADGui
from PySide import QtGui

# === COMMANDE : ce qui se passe lorsque le bouton est cliqu√© ===
class HelloWorldCommand:
    def GetResources(self):
        """Renvoie les donn√©es pour l'affichage de la commande"""
        return {
            "MenuText": "Say Hello",      # Texte dans le menu
            "ToolTip": "Show a greeting", # Info-bulle
            "Pixmap": ""                  # Chemin vers l'ic√¥ne (vide pour l'instant)
        }

    def Activated(self):
        """Appel√© lorsque le bouton est cliqu√©"""
        QtGui.QMessageBox.information(
            None,
            "FreeCAD Addon",
            "Bonjour le monde !\nVous venez de lancer votre premier add-on !"
        )

    def IsActive(self):
        """Quand la commande est-elle disponible ? (toujours ‚Äî True)"""
        return True


# === ENVIRONNEMENT DE TRAVAIL : regroupe les commandes ===
class HelloWorldWorkbench(FreeCADGui.Workbench):
    # Nom qui sera affich√© dans la liste
    MenuText = "Hello World"
    ToolTip = "Mon premier environnement de travail"

    def Initialize(self):
        """Appel√© lors de l'activation de l'environnement de travail"""
        # Liste des noms de commandes
        self.list = ["HelloWorldCommand"]
        
        # Ajout de la barre d'outils
        self.appendToolbar("Hello Tools", self.list)
        
        # Ajout d'un √©l√©ment au menu
        self.appendMenu("Hello World", self.list)

    def GetClassName(self):
        """M√©thode requise pour les environnements de travail Python"""
        return "Gui::PythonWorkbench"


# === ENREGISTREMENT DE LA COMMANDE ===
FreeCADGui.addCommand("HelloWorldCommand", HelloWorldCommand())
```

### üîç Analyse du code par parties :

#### 1. **Commande (`HelloWorldCommand`)**
- `GetResources()` ‚Äî d√©crit l'apparence de la commande dans l'interface
- `Activated()` ‚Äî ce qui se passe au clic
- `IsActive()` ‚Äî quand le bouton est actif (par exemple, seulement s'il y a un document)

#### 2. **Environnement de travail (`HelloWorldWorkbench`)**
- H√©rite de `FreeCADGui.Workbench`
- La m√©thode `Initialize()` ajoute les commandes √† la barre d'outils et au menu
- `GetClassName()` dit √† FreeCAD : ¬´ c'est un environnement de travail Python ¬ª

#### 3. **Enregistrement**
- `FreeCADGui.addCommand()` lie le nom `